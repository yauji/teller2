{% extends "base.html" %}

{% block nav_trans %}active{% endblock %}


{% block contents %} 

{% if error_message %}<p><strong>{{ error_message }}</strong></p>{% endif %}

<form action="{% url 'trans:add' %}" method="post">
  {% csrf_token %}
  date:<input type="text" name="date" id="date"/>
  name:<input type="text" name="name" id="name"/>

  expense:<input type="text" name="expense" id="expense"/>

  memo:<input type="text" name="memo" id="memo"/>

  category:
  <select name="cg" id="cg">
    {% for cg in categorygroup_list %}    
    <option value="{{cg.id}}">{{cg.name}}</opetion>
    {% endfor %}
  </select>
  
  <select name="c" id="c">
    {% for c in category_list %}    
    <option value="{{c.id}}">{{c.name}}</opetion>
    {% endfor %}
</select>

pmethod:
  <select name="pmg" id="pmg">
    {% for pmg in pmgroup_list %}    
    <option value="{{pmg.id}}">{{pmg.name}}</opetion>
    {% endfor %}
  </select>

  <select name="pm" id="pm">
    {% for pm in pmethod_list %}    
    <option value="{{pm.id}}">{{pm.name}}</opetion>
    {% endfor %}
  </select>



  
  
  
  <input type="submit" value="Add" />
</form>



    <form action="{% url 'trans:delete' %}" method="post">
	<!--	-->
      {% csrf_token %}
    
    <table border="1" class="table table-striped">
      <tr>
	<th></th>
	<th></th>
	<th>Date</th>
	<th>Item</th>
	<th>Expense</th>
	<th>Balance</th>
	<th></th>
	<th></th>
	<th></th>
	<th></th>
      </tr>
      {% for trans in latest_trans_list %}
      <tr>
	<td> <input type="checkbox" name="cb" value="{{ trans.id }}" /></td>
	<td>{{ trans.id }}</td>
	<td>{{ trans.date }}</td>
	<td>{{ trans.name }}</td>
	<td>{{ trans.expense }}</td>
	<td>{{ trans.balance }}</td>
	<td>{{ trans.pmethod.name }}</td>
	<td>{{ trans.category.name }}</td>
	<td>{{ trans.user }}</td>
	<td><a href="">{{ trans.trans_text }}</a></td>

      </tr>
      {% endfor %}
    </table>
      <input type="submit" value="Delete" />
</form>

<form action="{% url 'trans:add' %}" method="post">
  {% csrf_token %}
  <input type="textbox" name="name" id="idname" value="hoge" />
  <input type="submit" value="Add" />
</form>

{% endblock contents %}



{% block script %}
$(function() {
$('#cg').change(function(e) {
   //$('#c option').remove();
   $.ajax('get.php',
{
type: 'get',
data: { query: $('#keyword').val() },
dataType: 'xml'
}
)
// 検索成功時にはページに結果を反映
.done(function(data) {
// 結果リストをクリア
$('#result').empty();
// <Question>要素（個々の質問情報）を順番に処理
  $('Question', data).each(function() {
  // <Url>（詳細ページ）、<Content>（質問本文）を基にリンクリストを生成
      $('#result').append(
      $('<li></li>').append(
      $('<a></a>')
      .attr({
      href: $('Url', this).text(),
      target: '_blank'
      })
      .text($('Content', this).text().substring(0, 255) + '...')
      )
      );
      });
          })
});
});
{% endblock script %}
  









    
    
